<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤ªç©ºé‡Œçš„ä»»åŠ¡ç³»ç»Ÿ</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'PingFang SC', 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            padding: 20px;
            color: #fff;
        }
        .container { max-width: 800px; margin: 0 auto; }
        h1 { text-align: center; margin-bottom: 30px; color: #4fc3f7; }
        
        /* ä»»åŠ¡ç»Ÿè®¡ */
        .stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-bottom: 30px;
        }
        .stat-item {
            text-align: center;
            background: rgba(255,255,255,0.1);
            padding: 15px 30px;
            border-radius: 10px;
        }
        .stat-value { font-size: 32px; font-weight: bold; color: #4fc3f7; }
        .stat-label { color: #aaa; margin-top: 5px; }
        
        /* åˆ†ç±»æ ‡ç­¾ */
        .tabs { display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap; }
        .tab {
            padding: 10px 20px;
            background: rgba(255,255,255,0.1);
            border: none;
            border-radius: 20px;
            color: #fff;
            cursor: pointer;
            transition: all 0.3s;
        }
        .tab:hover, .tab.active { background: #4fc3f7; color: #000; }
        
        /* ä»»åŠ¡åˆ—è¡¨ */
        .task-list { list-style: none; }
        .task-item {
            background: rgba(255,255,255,0.95);
            color: #333;
            padding: 15px 20px;
            margin-bottom: 10px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            gap: 15px;
            transition: all 0.3s;
        }
        .task-item:hover { transform: translateX(5px); }
        .task-item.done { opacity: 0.6; }
        .task-item.done .task-title { text-decoration: line-through; }
        
        .task-checkbox {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }
        .task-content { flex: 1; }
        .task-title { font-weight: bold; margin-bottom: 5px; }
        .task-meta { font-size: 12px; color: #666; }
        .task-tag {
            padding: 3px 10px;
            border-radius: 10px;
            font-size: 12px;
            color: #fff;
        }
        .tag-high { background: #f44336; }
        .tag-medium { background: #ff9800; }
        .tag-low { background: #4caf50; }
        .tag-project { background: #2196f3; }
        
        .task-date {
            font-size: 12px;
            color: #999;
            white-space: nowrap;
        }
        
        .task-priority {
            width: 8px;
            height: 40px;
            border-radius: 4px;
        }
        .priority-high { background: #f44336; }
        .priority-medium { background: #ff9800; }
        .priority-low { background: #4caf50; }
        
        /* æ·»åŠ ä»»åŠ¡ */
        .add-task {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }
        .add-task input, .add-task select {
            padding: 10px;
            border: none;
            border-radius: 5px;
            margin-right: 10px;
            margin-bottom: 10px;
        }
        .add-task input[type="text"] { width: 60%; }
        .add-task button {
            padding: 10px 20px;
            background: #4fc3f7;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            color: #000;
            font-weight: bold;
        }
        .add-task button:hover { background: #29b6f6; }
        
        footer { text-align: center; margin-top: 40px; color: #666; font-size: 12px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¦Š å¤ªç©ºé‡Œçš„ä»»åŠ¡ç³»ç»Ÿ</h1>
        
        <!-- ä»»åŠ¡ç»Ÿè®¡ -->
        <div class="stats">
            <div class="stat-item">
                <div class="stat-value" id="total">0</div>
                <div class="stat-label">æ€»ä»»åŠ¡</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="done">0</div>
                <div class="stat-label">å·²å®Œæˆ</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="pending">0</div>
                <div class="stat-label">å¾…å®Œæˆ</div>
            </div>
        </div>
        
        <!-- åˆ†ç±»ç­›é€‰ -->
        <div class="tabs">
            <button class="tab active" data-filter="all">å…¨éƒ¨</button>
            <button class="tab" data-filter="project">é¡¹ç›®</button>
            <button class="tab" data-filter="daily">æ—¥å¸¸</button>
            <button class="tab" data-filter="long-term">é•¿æœŸ</button>
        </div>
        
        <!-- ä»»åŠ¡åˆ—è¡¨ -->
        <ul class="task-list" id="taskList">
            <!-- ä»»åŠ¡å°†é€šè¿‡ JavaScript æ¸²æŸ“ -->
        </ul>
        
        <!-- æ·»åŠ ä»»åŠ¡ -->
        <div class="add-task">
            <h3 style="margin-bottom: 15px;">æ·»åŠ æ–°ä»»åŠ¡</h3>
            <input type="text" id="newTaskTitle" placeholder="ä»»åŠ¡æ ‡é¢˜...">
            <select id="newTaskPriority">
                <option value="low">ä½ä¼˜å…ˆçº§</option>
                <option value="medium">ä¸­ä¼˜å…ˆçº§</option>
                <option value="high">é«˜ä¼˜å…ˆçº§</option>
            </select>
            <select id="newTaskCategory">
                <option value="project">é¡¹ç›®</option>
                <option value="daily">æ—¥å¸¸</option>
                <option value="long-term">é•¿æœŸ</option>
            </select>
            <button onclick="addTask()">æ·»åŠ ä»»åŠ¡</button>
        </div>
        
        <footer>
            <p>æ›´æ–°æ—¶é—´ï¼š<span id="updateTime">åŠ è½½ä¸­...</span></p>
            <p>å°ç‹ç‹¸çš„ä»»åŠ¡ç®¡ç†ç³»ç»Ÿ ğŸ¦Š</p>
        </footer>
    </div>

    <script>
        // ä»»åŠ¡æ•°æ®
        let tasks = JSON.parse(localStorage.getItem('tasks')) || [
            // è¿™é‡Œçš„ä»»åŠ¡ä¼šè¢«JavaScriptåŠ¨æ€åŠ è½½
        ];

        // ä»æœ¬åœ°æ–‡ä»¶åŠ è½½ä»»åŠ¡
        async function loadTasks() {
            try {
                const response = await fetch('tasks.json');
                const fileTasks = await response.json();
                if (fileTasks.length > 0) {
                    tasks = fileTasks;
                    saveTasks();
                }
            } catch (e) {
                console.log('ä½¿ç”¨æœ¬åœ°å­˜å‚¨çš„ä»»åŠ¡');
            }
            renderTasks();
        }

        // ä¿å­˜ä»»åŠ¡åˆ°æœ¬åœ°
        function saveTasks() {
            localStorage.setItem('tasks', JSON.stringify(tasks));
            document.getElementById('updateTime').textContent = new Date().toLocaleString('zh-CN');
        }

        // æ¸²æŸ“ä»»åŠ¡åˆ—è¡¨
        function renderTasks(filter = 'all') {
            const taskList = document.getElementById('taskList');
            taskList.innerHTML = '';
            
            let total = 0, done = 0;
            
            tasks.forEach((task, index) => {
                if (filter !== 'all' && task.category !== filter) return;
                
                total++;
                if (task.done) done++;
                
                const li = document.createElement('li');
                li.className = `task-item ${task.done ? 'done' : ''}`;
                li.innerHTML = `
                    <div class="task-priority priority-${task.priority}"></div>
                    <input type="checkbox" class="task-checkbox" 
                        ${task.done ? 'checked' : ''} 
                        onchange="toggleTask(${index})">
                    <div class="task-content">
                        <div class="task-title">${task.title}</div>
                        <div class="task-meta">
                            <span class="task-tag tag-${task.category}">${getCategoryName(task.category)}</span>
                            ${task.project ? `<span>é¡¹ç›®: ${task.project}</span>` : ''}
                        </div>
                    </div>
                    <div class="task-date">${task.date}</div>
                    <button onclick="deleteTask(${index})" style="background:red;color:white;border:none;padding:5px 10px;border-radius:5px;cursor:pointer;">åˆ é™¤</button>
                `;
                taskList.appendChild(li);
            });
            
            // æ›´æ–°ç»Ÿè®¡
            document.getElementById('total').textContent = tasks.length;
            document.getElementById('done').textContent = tasks.filter(t => t.done).length;
            document.getElementById('pending').textContent = tasks.filter(t => !t.done).length;
        }

        // è·å–åˆ†ç±»åç§°
        function getCategoryName(category) {
            const names = {
                'project': 'é¡¹ç›®',
                'daily': 'æ—¥å¸¸',
                'long-term': 'é•¿æœŸ'
            };
            return names[category] || category;
        }

        // åˆ‡æ¢ä»»åŠ¡çŠ¶æ€
        function toggleTask(index) {
            tasks[index].done = !tasks[index].done;
            saveTasks();
            renderTasks(document.querySelector('.tab.active').dataset.filter);
        }

        // åˆ é™¤ä»»åŠ¡
        function deleteTask(index) {
            if (confirm('ç¡®å®šåˆ é™¤è¿™ä¸ªä»»åŠ¡å—ï¼Ÿ')) {
                tasks.splice(index, 1);
                saveTasks();
                renderTasks(document.querySelector('.tab.active').dataset.filter);
            }
        }

        // æ·»åŠ ä»»åŠ¡
        function addTask() {
            const title = document.getElementById('newTaskTitle').value;
            const priority = document.getElementById('newTaskPriority').value;
            const category = document.getElementById('newTaskCategory').value;
            
            if (!title) {
                alert('è¯·è¾“å…¥ä»»åŠ¡æ ‡é¢˜');
                return;
            }
            
            tasks.unshift({
                title,
                priority,
                category,
                done: false,
                date: new Date().toLocaleDateString('zh-CN'),
                createdAt: new Date().toISOString()
            });
            
            document.getElementById('newTaskTitle').value = '';
            saveTasks();
            renderTasks(document.querySelector('.tab.active').dataset.filter);
        }

        // åˆ†ç±»ç­›é€‰
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', () => {
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                renderTasks(tab.dataset.filter);
            });
        });

        // åˆå§‹åŒ–
        loadTasks();
    </script>
</body>
</html>
